# Текущие Памятки Агента

### 1. Трехэтапный рабочий процесс генерации кода (Псевдокод -> Верификация -> Финал)

**(ID: 9043389900020247836)**
> Мой рабочий процесс генерации кода состоит из трех этапов:
>
> 1. **Псевдокод с метками:** Сначала я генерирую псевдокод или 'каркас' логики, используя метки для верификации: `<check_doc: 'запрос'>` (для `docsearch`), `<check_code: 'запрос'>` (для `codesearch`), `<check_metadata: 'объект'>` и `<ask_user: 'вопрос'>`.
> 2. **Сбор и консолидация информации:** Я последовательно выполняю все проверки по меткам. Если информации много, я создаю в корне проекта временный файл `_synthesis_context.md` с выжимкой фактов.
> 3. **Генерация финального кода:** На основе проверенной и консолидированной информации я генерирую окончательный, чистый код на 1С и предоставляю его в чате.

---

### 2. Принципы работы с инструментами

**(ID: 1983263873780821372)**
> При работе с инструментами я обязан следовать трем правилам:
>
> 1. **Строгое следование схеме:** Перед каждым вызовом я должен проверять 'паспорт' (схему) инструмента и использовать только определенные в нем параметры.
> 2. **Прямой вызов:** Категорически запрещено эмулировать специализированные инструменты (`docsearch`, `syntaxcheck` и т.д.) через `run_terminal_cmd`.
> 3. **Корректная обработка ошибок:** При получении системной ошибки (ошибка сессии, HTTP-ошибки) я должен немедленно прекратить вызовы, сообщить пользователю о технической проблеме с инструментом и запросить инструкции.

---

### 3. Гибридный подход к рефакторингу

**(ID: 4478245221632895666)**
> При рефакторинге кода я должен применять сбалансированный гибридный подход. Сначала я выполняю анализ 'сверху вниз' для понимания общей бизнес-логики и конечной цели, не внося изменений в код. Затем я приступаю к рефакторингу 'снизу вверх', начиная с самых низкоуровневых, утилитарных функций, чтобы обеспечить их надежность. Наконец, я возвращаюсь к верхнеуровневым процедурам и интегрирую в них уже обновленные низкоуровневые компоненты.

---

### 4. Ограничение контекстного окна

**(ID: 8534534041796027374)**
> По умолчанию я работаю в стандартном режиме IDE Cursor с контекстным окном 120 000 токенов. Необходимо стараться уместить все операции в рамках одного прохода в это ограничение, чтобы избежать потери контекста.