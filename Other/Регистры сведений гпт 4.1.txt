Спасибо, всё понятно, вот итоговое ТЗ на обработку:

---

### **Задача**

* Управляемая форма.
* На форме: поле для выбора даты и кнопка «Скопировать».
* Копируем в А **срез последних** из Б на выбранную дату.
* Копируем все записи из среза последних.
* В А пишем:

  * **Номенклатура** = Номенклатура из Б
  * **ЦенаБезСкидки** = Цена из Б
  * **ЦенаСоСкидкой** = ЦенаБезСкидки \* 0,8
* Дубли (Номенклатура+Период) — **перезаписываем** (обновляем запись).
* Очищать А полностью не надо.
* Протокол (сообщения о том, сколько записей скопировано и сколько обновлено) **выводим сообщением**.
* Префиксы и имена регистров: «А» и «Б» (прямо так).

---

## **Модуль обработки** (Обработка.ОбщийМодуль)

```1C
// Модуль объекта обработки

Процедура СкопироватьДанные(ДатаКопирования) Экспорт

    // Срез последних из регистра сведений Б на выбранную дату
    Выборка = РегистрыСведений.Б.СрезПоследних(ДатаКопирования);

    КоличествоДобавлено = 0;
    КоличествоОбновлено = 0;

    Пока Выборка.Следующий() Цикл
        // Подготавливаем структуру для поиска существующей записи в А
        СтруктураПоиска = Новый Структура;
        СтруктураПоиска.Вставить("Период", ДатаКопирования);
        СтруктураПоиска.Вставить("Номенклатура", Выборка.Номенклатура);

        // Пытаемся найти запись в А с такой же Номенклатурой и Периодом
        Запрос = Новый Запрос;
        Запрос.Текст = 
            "ВЫБРАТЬ
                РС.Период КАК Период,
                РС.Номенклатура КАК Номенклатура
             ИЗ
                РегистрСведений.А КАК РС
             ГДЕ
                РС.Период = &Период
                И РС.Номенклатура = &Номенклатура";
        Запрос.УстановитьПараметр("Период", ДатаКопирования);
        Запрос.УстановитьПараметр("Номенклатура", Выборка.Номенклатура);

        Результат = Запрос.Выполнить().Выбрать();
        
        Если Результат.Следующий() Тогда
            // Уже есть — обновляем
            Рек = РегистрыСведений.А.ПолучитьЗапись(ДатаКопирования, Выборка.Номенклатура);
            КоличествоОбновлено = КоличествоОбновлено + 1;
        Иначе
            // Нет — добавляем
            Рек = РегистрыСведений.А.СоздатьНаборЗаписей();
            Рек.Записать = Истина;
            Рек.Записи.Добавить();
            КоличествоДобавлено = КоличествоДобавлено + 1;
        КонецЕсли;
        
        // Заполняем значения
        Запись = Рек.Записи[0];
        Запись.Период = ДатаКопирования;
        Запись.Номенклатура = Выборка.Номенклатура;
        Запись.ЦенаБезСкидки = Выборка.Цена;
        Запись.ЦенаСоСкидкой = Выборка.Цена * 0.8;

        Рек.Записать();
    КонецЦикла;

    Сообщить("Добавлено: " + Стр(КоличествоДобавлено) + "; Обновлено: " + Стр(КоличествоОбновлено));
    
КонецПроцедуры
```

---

## **Модуль формы** (Форма)

```1C
// Модуль формы

Перем ДатаКопирования;

Процедура ПриОткрытии()
    // Устанавливаем сегодняшнюю дату по умолчанию
    ДатаКопирования = ТекущаяДата();
    ЭлементыФормы.ПолеДата.Значение = ДатаКопирования;
КонецПроцедуры

Процедура КнопкаСкопироватьНажатие(Кнопка)
    ДатаКопирования = ЭлементыФормы.ПолеДата.Значение;
    Обработка.СкопироватьДанные(ДатаКопирования);
КонецПроцедуры
```

---

## **Пояснения по форме**

* На форме 1 поле: **Дата** (ПолеДата, тип «Дата»)
* Кнопка: **Скопировать** (КнопкаСкопировать)
* Можно добавить обработчик ошибок (если надо — скажи).

---

## **Если нужно доработать:**

* Поддержка других измерений/ресурсов
* Показ протокола отдельным окном
* Массовое копирование по диапазону дат
  — просто скажи.

---

**Если всё устраивает — скажу, как правильно воткнуть этот код, чтобы он завёлся в 1С, под твой сценарий. Если надо добавить/подправить — тоже скажи.**
